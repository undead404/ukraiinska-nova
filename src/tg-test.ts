import { TelegramService } from './services/telegram';
import { config } from 'dotenv';

// –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
config();

// –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
async function main() {
  const telegram = new TelegramService({
    token: process.env.TELEGRAM_BOT_TOKEN!,
    channelId: '@ukraiinskanova', // –∞–±–æ ID —á–∞—Ç—É
  });

  try {
    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–æ–∫–µ–Ω—É
    const isValid = await telegram.validateToken();
    if (!isValid) {
      throw new Error('–ù–µ–≤–∞–ª—ñ–¥–Ω–∏–π —Ç–æ–∫–µ–Ω –±–æ—Ç–∞');
    }

    // –û—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –±–æ—Ç–∞
    const botInfo = await telegram.getBotInfo();
    console.log(`ü§ñ –ë–æ—Ç: @${botInfo.username}`);

    // –ö–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç
    const chatId = '@ukraiinskanova'; // –∞–±–æ —á–∏—Å–ª–æ–≤–∏–π ID
    const shortText =
      '–ü—Ä–∏–≤—ñ—Ç, Telegram! ü§ñ –¶–µ —Ç–µ—Å—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º.';
    await telegram.sendText(chatId, shortText);

    // –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–∞–Ω–∞–ª—É
    await telegram.sendToChannel('–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ –∫–∞–Ω–∞–ª üì¢');

    // –î–æ–≤–≥–∏–π —Ç–µ–∫—Å—Ç –∑ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è–º
    const longText = `
  ${TelegramService.bold('–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –¥–æ–≤–≥–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è')}
  
  –¶–µ–π —Å–µ—Ä–≤—ñ—Å –¥–ª—è Telegram –ø—ñ–¥—Ç—Ä–∏–º—É—î:
  ‚úÖ Unicode —Å–∏–º–≤–æ–ª–∏ (—É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ, –µ–º–æ–¥–∑—ñ —Ç–æ—â–æ)
  ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ä–æ–∑–±–∏—Ç—Ç—è –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
  ‚úÖ HTML —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è
  ‚úÖ –†–æ–∑—É–º–Ω–µ —Ä–æ–∑–±–∏—Ç—Ç—è —Ç–µ–∫—Å—Ç—É
  
  ${TelegramService.italic('–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:')}
  ‚Ä¢ –ú–∞–∫—Å–∏–º—É–º 4096 —Å–∏–º–≤–æ–ª—ñ–≤ –Ω–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
  ‚Ä¢ –†–æ–∑–±–∏—Ç—Ç—è –ø–æ –∞–±–∑–∞—Ü–∞—Ö —Ç–∞ —Ä–µ—á–µ–Ω–Ω—è—Ö
  ‚Ä¢ –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è
  ‚Ä¢ –ó–∞—Ç—Ä–∏–º–∫–∏ –º—ñ–∂ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º–∏
  
  ${TelegramService.code('–¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ:')}
  –ö–æ–ª–∏ —Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–≤–∏—â—É—î –ª—ñ–º—ñ—Ç Telegram (4096 —Å–∏–º–≤–æ–ª—ñ–≤), –≤—ñ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ 
  —Ä–æ–∑–±–∏–≤–∞—î—Ç—å—Å—è –Ω–∞ –∫—ñ–ª—å–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å. –°–µ—Ä–≤—ñ—Å –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è —Ä–æ–∑–±–∏–≤–∞—Ç–∏ –ø–æ 
  –∞–±–∑–∞—Ü–∞—Ö –∞–±–æ —Ä–µ—á–µ–Ω–Ω—è—Ö –¥–ª—è –∑—Ä—É—á–Ω–æ—Å—Ç—ñ —á–∏—Ç–∞–Ω–Ω—è.
  
  ${TelegramService.link('–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è Telegram Bot API', 'https://core.telegram.org/bots/api')}
  
  –¶–µ–π —Ç–µ–∫—Å—Ç –±—É–¥–µ —Ä–æ–∑–±–∏—Ç–æ –Ω–∞ –∫—ñ–ª—å–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –∑ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è.
      `.trim();

    await telegram.sendText(chatId, longText, { delay: 1000 });
  } catch (error) {
    console.error('–ü–æ–º–∏–ª–∫–∞:', error);
  }
}

// –ï–∫—Å–ø–æ—Ä—Ç –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
void main();
