import { BlueskyService } from './services/bluesky';
import environment from './environment';

async function main() {
  const bluesky = new BlueskyService({
    service: 'https://bsky.social',
    identifier: environment.BLUESKY_IDENTIFIER, // –∞–±–æ email
    password: environment.BLUESKY_PASSWORD, // –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ App Password, –Ω–µ –æ—Å–Ω–æ–≤–Ω–∏–π –ø–∞—Ä–æ–ª—å!
  });

  try {
    // –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
    await bluesky.login();

    // –ö–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç
    const shortText =
      '–ü—Ä–∏–≤—ñ—Ç, —Å–≤—ñ—Ç! üåç –¶–µ —Ç–µ—Å—Ç–æ–≤–∏–π –ø–æ—Å—Ç –∑ —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º.';
    await bluesky.publishText(shortText);

    // –î–æ–≤–≥–∏–π —Ç–µ–∫—Å—Ç –¥–ª—è —Ç—Ä–µ–¥—É
    const longText = `
      –¶–µ –¥–æ–≤–≥–∏–π —Ç–µ–∫—Å—Ç, —è–∫–∏–π –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç—Ä–µ–¥—É –≤ Bluesky. 
      
      –¶–µ–π —Å–µ—Ä–≤—ñ—Å –ø—ñ–¥—Ç—Ä–∏–º—É—î:
      ‚úÖ Unicode —Å–∏–º–≤–æ–ª–∏ (—É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ, –µ–º–æ–¥–∑—ñ —Ç–æ—â–æ)
      ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ä–æ–∑–±–∏—Ç—Ç—è –Ω–∞ —á–∞—Å—Ç–∏–Ω–∏
      ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç—Ä–µ–¥—ñ–≤
      ‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
      
      –ö–æ–ª–∏ —Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–≤–∏—â—É—î 300 —Å–∏–º–≤–æ–ª—ñ–≤, –≤—ñ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–∑–±–∏–≤–∞—î—Ç—å—Å—è –Ω–∞ –∫—ñ–ª—å–∫–∞ –ø–æ—Å—Ç—ñ–≤, 
      —è–∫—ñ –∑'—î–¥–Ω—É—é—Ç—å—Å—è —É —Ç—Ä–µ–¥. –¶–µ –¥–æ–∑–≤–æ–ª—è—î –ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏ –¥–æ–≤–≥—ñ –¥—É–º–∫–∏ –±–µ–∑ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ 
      —Ä—É—á–Ω–æ–≥–æ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è.
      
      –°–µ—Ä–≤—ñ—Å –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è —Ä–æ–∑–±–∏–≤–∞—Ç–∏ —Ç–µ–∫—Å—Ç –ø–æ —Å–ª–æ–≤–∞—Ö, —â–æ–± –Ω–µ —Ä–≤–∞—Ç–∏ —Ä–µ—á–µ–Ω–Ω—è –ø–æ—Å–µ—Ä–µ–¥–∏–Ω—ñ. 
      –¶–µ —Ä–æ–±–∏—Ç—å —á–∏—Ç–∞–Ω–Ω—è –±—ñ–ª—å—à –∑—Ä—É—á–Ω–∏–º –¥–ª—è –≤–∞—à–∏—Ö –ø—ñ–¥–ø–∏—Å–Ω–∏–∫—ñ–≤.
      `;

    await bluesky.publishText(longText.trim());
  } catch (error) {
    console.error('–ü–æ–º–∏–ª–∫–∞:', error);
  }
}

void main();
